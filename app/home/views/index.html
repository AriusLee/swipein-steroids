<div class="home-page" ng-controller="IndexController" style="min-height: 500px;">

  <super-navbar>
    <super-navbar-button onclick="openDrawerLeft()">Menu</super-navbar-button>
    <super-navbar-title>
      Index
    </super-navbar-title>
    <super-navbar-button onclick="openDrawerRight()" side="right">Right</super-navbar-button>
  </super-navbar>

  <div class="padding">
    <h1>Pow! Here's your fresh module!</h1>
  </div>

  <div class="bottom-bar bg-black">
    <div class="swipein-box">

      <div id="leave-btn" class="leave-btn" onclick="showLeaveOptions()"><i class="icon super-close-round"></i></div>
      <div id="break-btn" class="break-btn" onclick="breakTime()"><i class="icon super-log-out"></i></div>
      <div id="unbreak-btn" class="unbreak-btn" onclick="finishBreak()"><i class="icon super-log-in"></i></div>

      <div id="swipe-btn">
        <div id="swipe-handle">swipe</div>
      </div>
    </div>
  </div>

  <div id="leave-options" class="bottom-drawer padding">
    <button class="button button-block">Annual Leave</button>
    <button class="button button-block">I'm not well</button>
    <button class="button button-block">Something unexpected came up</button>
    <button class="button button-block" onclick="hideLeaveOptions()" style="border-bottom: none; color: rgba(255,255,255,0.5);">Cancel</button>
  </div>

</div>

<script>

  window.scrollTo(0, 100);
  window.scrollTo(0, 0);

  var swipeButton = document.getElementById('swipe-btn');
  var swipeHandle = document.getElementById('swipe-handle');
  var startx = 0;
  var dist = 0;
  var leaveButton = document.getElementById('leave-btn');
  var breakButton = document.getElementById('break-btn');
  var unbreakButton = document.getElementById('unbreak-btn');

  function showLeaveOptions() {
    var leaveOptions = document.getElementById('leave-options');
    leaveOptions.style.bottom = "0";
  };

  function hideLeaveOptions() {
    var leaveOptions = document.getElementById('leave-options');
    leaveOptions.style.bottom = "-500px";
  };

  function openDrawerLeft() {
    supersonic.ui.drawers.open("left");
  }

  function openDrawerRight() {
    supersonic.ui.drawers.open("right");
  }

  function showBreakButton() {
    breakButton.style.display = "block";
    leaveButton.style.display = "none";
    unbreakButton.style.display = "none";
  }

  function showUnbreakButton() {
    unbreakButton.style.display = "block";
    leaveButton.style.display = "none";
    breakButton.style.display = "none";
  }

  function showLeaveButton() {
    unbreakButton.style.display = "none";
    leaveButton.style.display = "block";
    breakButton.style.display = "none";
  }

  function breakTime() {
    showUnbreakButton();
    swipeButton.className = "pause";
  }

  function finishBreak() {
    showBreakButton();
    swipeButton.className = "on";
  }

  swipeHandle.addEventListener("touchstart", function(e) {
    var touchobj = e.changedTouches[0];
    startx = parseInt(touchobj.clientX);
    e.preventDefault();
  });

  swipeHandle.addEventListener("touchmove", function(e){
    var touchobj = e.changedTouches[0];
    var dist = parseInt(touchobj.clientX) - startx;
    e.preventDefault();
  });

  swipeHandle.addEventListener("touchend", function(e){
    var touchobj = e.changedTouches[0];
    var dist = parseInt(touchobj.clientX) - startx;
    if (dist > 0) {
      swipeButton.className += " on";
      showBreakButton();
    } else {
      swipeButton.className = "";
      showLeaveButton();
    }
    e.preventDefault();
  });
</script>
